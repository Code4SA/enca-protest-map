<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Protest Map</title>
	<link rel="stylesheet" href="css/style.css">
	
	<link rel="stylesheet" href="leaflet/leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="http://leaflet.cloudmade.com/dist/leaflet.ie.css" /><![endif]-->
	<link rel="stylesheet" href="bootstrap/css/bootstrap.flatly.css">
	
</head>
<body>
	<div id="container" class="container">
		<div class="col-md-12">
			
		<div class="col-md-9">
			<div id="header">
				<div id="headline" class="col-md-8">
					<h1>South Africa's Protest Map</h1>
					<div id="blurb">Produced by <a href="http://code4sa.org" target="_blank">Code for South Africa</a> and <a href="http://enca.co.za" target="_blank">eNCA</a> | Data source <a href="http://www.issafrica.org" target="_blank">Institute for Security Studies</a> | <a href="protestdata.csv">CSV</a></div>
				</div>

				<div id="logos" class="col-md-4">
					<a href="http://code4sa.org" target="_blank"><img src="img/c4sa_logo.png" alt="Code for South Africa"></a>
					<a href="http://enca.co.za" target="_blank"><img src="img/enca_logo.png" alt="eNCA"></a>
				</div>
			</div>

			<div id="protest_types"></div>
			
			<div id="visible_date"></div>
			
			<div id="map">
			</div>

			
			<div id="scrubber"></div>
			<div id="histogram"></div>
			<div id="hover" class="hidden">
				<div id="loading_msg">
					Loading...
				</div>
				<dl class="dl-horizontal">
					<dt>Date</dt>
					<dd id="date"></dd>
					<dt>Municipality</dt>
					<dd id="Municipality_metro"></dd>
					<dt>Suburb</dt>
					<dd id="Suburbareaplacename"></dd>
					<dt>Town</dt>
					<dd id="TownCity_Name"></dd>
					<dt>Street</dt>
					<dd id="First_Street"></dd>
					<dt>Protest Type</dt>
					<dd id="type"></dd>
					<dt>Violent or non-violent</dt>
					<dd id="Violent_or_violent"></dd>
				</dl>
				<p id="Reasonforprotest"></p>
			</div>
		</div>
		<div class="col-md-3" id="embed_code_container">
			<h3>Embed this map</h3>
			<textarea name="" id="embed_code" cols="30" rows="10"></textarea>
			<h3 id="ward_name"></h3>
			<div class="panel-group" id="accordion">
				<div class="panel panel-default" id="panel-voting">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion" href="#collapseVoting">Voting</a>
						</h4>
					</div>
					<div id="collapseVoting" class="panel-collapse collapse">
						<div class="panel-body">
							<iframe id="wazi-embed-voting" class="census-reporter-embed" frameborder="0" width="100%" height="600" style="margin: 1em; max-width: 720px;"></iframe>
						</div>
					</div>
				</div>

				<div class="panel panel-default" id="panel-water">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion" href="#collapseWater">
								Water
							</a>
						</h4>
					</div>
					<div id="collapseWater" class="panel-collapse collapse">
						<div class="panel-body">
							<iframe id="wazi-embed-water" class="census-reporter-embed" frameborder="0" width="100%" height="300" style="margin: 1em; max-width: 720px; overflow-y: scroll"></iframe>
						</div>
					</div>
				</div>

				<div class="panel panel-default" id="panel-refuse">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion" href="#collapseRefuse">
								Refuse
							</a>
						</h4>
					</div>
					<div id="collapseRefuse" class="panel-collapse collapse">
						<div class="panel-body">
							<iframe id="wazi-embed-refuse" class="census-reporter-embed" frameborder="0" width="100%" height="350" style="margin: 1em; max-width: 720px;"></iframe>
						</div>
					</div>
				</div>

				<div class="panel panel-default" id="panel-toilet">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion" href="#collapseToilet">
								Toilet
							</a>
						</h4>
					</div>
					<div id="collapseToilet" class="panel-collapse collapse">
						<div class="panel-body">
							<iframe id="wazi-embed-toilet" class="census-reporter-embed" frameborder="0" width="100%" height="400" style="margin: 1em; max-width: 720px;"></iframe>
						</div>
					</div>
				</div>

				<div class="panel panel-default" id="panel-employment">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion" href="#collapseEmployment">
								Employment
							</a>
						</h4>
					</div>
					<div id="collapseEmployment" class="panel-collapse collapse">
						<div class="panel-body">
							<iframe id="wazi-embed-employment" class="census-reporter-embed" frameborder="0" width="100%" height="350" style="margin: 1em; max-width: 720px;"></iframe>
						</div>
					</div>
				</div>

				<div class="panel panel-default" id="panel-income">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion" href="#collapseIncome">
								Income
							</a>
						</h4>
					</div>
					<div id="collapseIncome" class="panel-collapse collapse">
						<div class="panel-body">
							<iframe id="wazi-embed-income" class="census-reporter-embed" frameborder="0" width="100%" height="780" style="margin: 1em; max-width: 720px;"></iframe>
						</div>
					</div>
				</div>

				<div class="panel panel-default" id="panel-education">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion" href="#collapseEducation">
								Education
							</a>
						</h4>
					</div>
					<div id="collapseEducation" class="panel-collapse collapse">
						<div class="panel-body">
							<iframe id="wazi-embed-education" class="census-reporter-embed" frameborder="0" width="100%" height="600" style="margin: 1em; max-width: 720px;"></iframe>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript" src="d3/d3.v3.min.js"></script>
<script type="text/javascript" src="leaflet/leaflet.js"></script>
<script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.2.4"></script>
<script language="javascript" src="javascript/protestmap.js"></script>
<script src="jquery/jquery-1.11.1.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">

$(".collapse").on('shown.bs.collapse', function(e) {
	// $(".collapse").find("iframe").attr("src", "");
	// var el = $(e.currentTarget);
	// el.find("iframe").attr("src", el.find("iframe").attr("data-src"));
});
initialize();
</script>
</body>
</html>